"0",""
"0","# Select admitted patients only"
"0","covid_status <- data %>%"
"0","                filter(floor == ""TRUE"" | step == ""TRUE"" | icu == ""TRUE"") "
"0",""
"0","#recode admission and COVID status columns"
"0","covid_status$admission <- base::ifelse(covid_status$floor == ""TRUE"", ""1"", "
"0","                               base::ifelse(covid_status$step == ""TRUE"", ""2"","
"0","                                            base::ifelse(covid_status$icu == ""TRUE"", ""2"", ""0""))) %>% base::as.numeric()"
"0","covid_status$COVID <- base::ifelse(covid_status$COVID == ""positive"", ""1"",""0"")"
"0",""
"0","# remove the old floor/step/icu columns, then reorder the columns to put covid target first"
"0","covid_status <- covid_status %>% "
"0","                dplyr::select(-floor, "
"0","                       -step,"
"0","                       -icu,"
"0","                       -patient_id) %>%"
"0","                dplyr::select(COVID, "
"0","                       everything())"
"0",""
"0",""
"0","# Subset into covid stratified training and testing sets"
"0","set.seed(333)"
"0","split_status  <- initial_split(covid_status, "
"0","                        prop = 0.7, "
"0","                        strata = ""COVID"")"
"0",""
"0","train_s  <- training(split_status)"
"0","test_s   <- testing(split_status)"
"0",""
"0",""
